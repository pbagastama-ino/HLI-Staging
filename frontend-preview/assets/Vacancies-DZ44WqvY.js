import{r as D,x as T,C as z,p as N,c as m,o,w as d,a as e,b as g,d as p,e as b,u as l,l as u,f as n,t as i,i as A,j as E,F as M,g as C,n as P,k as $}from"./app-D_i4R_mt.js";import{_ as U}from"./AdminLayout-DG98k_k6.js";import"./hligp-logo-CGFychJV.js";const O={class:"mb-6"},q={class:"flex justify-between items-center"},H={class:"flex space-x-3"},I={key:0,class:"mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg relative"},Q={key:1,class:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg relative"},W={class:"mb-6"},G={class:"max-w-md"},J={class:"bg-white rounded-lg shadow overflow-hidden"},K={class:"overflow-x-auto"},R={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"text-sm font-medium text-gray-900"},ee={class:"text-sm text-gray-500 truncate max-w-xs"},te={class:"px-6 py-4 whitespace-nowrap"},se={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ne={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},ie={class:"flex space-x-2"},le=["onClick"],de={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},ce={class:"flex items-center justify-between"},ue={class:"flex-1 flex justify-between sm:hidden"},pe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},me={class:"text-sm text-gray-700"},ge={class:"font-medium"},xe={class:"font-medium"},fe={class:"font-medium"},he={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},be={__name:"Vacancies",props:{vacancies:Object,filters:Object,user:Object},setup(a){const L=(r,t)=>{let s;return function(...c){const f=()=>{clearTimeout(s),r(...c)};clearTimeout(s),s=setTimeout(f,t)}},y=a,x=D(y.filters.search||""),h=D(!0),k=L(()=>{$.get("/hli-admin/vacancies",{search:x.value},{preserveState:!0,replace:!0})},300),_=()=>{h.value=!1},B=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),F=r=>{confirm(`Are you sure you want to delete "${r.title}"?`)&&(console.log("Attempting to delete vacancy:",r.id,r.title),$.delete(`/hli-admin/vacancies/${r.id}`,{onBefore:()=>{console.log("Delete request initiated")},onSuccess:t=>{console.log("Delete successful:",t)},onError:t=>{console.error("Delete error:",t),alert("Failed to delete vacancy. Please try again.")},onFinish:()=>{console.log("Delete request finished")}}))},j=()=>{const r=y.vacancies.current_page,t=y.vacancies.last_page,s=2,v=[],c=[];for(let f=Math.max(2,r-s);f<=Math.min(t-1,r+s);f++)v.push(f);return r-s>2?c.push(1,"..."):c.push(1),c.push(...v),r+s<t-1?c.push("...",t):t>1&&c.push(t),c},V=r=>r==="..."?"#":`/hli-admin/vacancies?page=${r}${x.value?`&search=${x.value}`:""}`;T(()=>{setTimeout(()=>{h.value=!1},5e3)});const S=z();let w=!1;return N(()=>S.props.flash?.error,r=>{r&&!w&&(w=!0,setTimeout(()=>{const t=document.createElement("div");t.className="fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-lg z-50 max-w-md",t.innerHTML=`
        <div class="flex items-center">
          <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
          </svg>
          <div>
            <strong>Error:</strong> ${r}
          </div>
          <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-red-500 hover:text-red-700">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
            </svg>
          </button>
        </div>
      `,document.body.appendChild(t),setTimeout(()=>{t.parentElement&&t.remove()},5e3),setTimeout(()=>{w=!1},1e3)},100))},{immediate:!0}),(r,t)=>(o(),m(U,{"current-page":"vacancies",title:"Vacancy Management","search-placeholder":"Search vacancies...",user:a.user},{default:d(()=>[e("div",O,[e("div",q,[t[3]||(t[3]=e("div",null,[e("h2",{class:"text-xl font-semibold text-gray-800"},"Vacancies"),e("p",{class:"text-sm text-gray-600 mt-1"},"Manage job postings and career opportunities")],-1)),e("div",H,[b(l(u),{href:"/hli-admin/vacancies/create",class:"px-4 py-2 text-sm font-medium text-white bg-[#4D9F95] rounded-lg hover:bg-[#3d7f75] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#4D9F95]"},{default:d(()=>[...t[2]||(t[2]=[e("svg",{class:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),n(" Add Vacancy ",-1)])]),_:1})])])]),h.value&&r.$page.props.flash&&r.$page.props.flash.success?(o(),g("div",I,[e("button",{onClick:_,class:"absolute top-2 right-2 text-green-600 hover:text-green-800"},[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),n(" "+i(r.$page.props.flash.success),1)])):p("",!0),h.value&&r.$page.props.flash&&r.$page.props.flash.error?(o(),g("div",Q,[e("button",{onClick:_,class:"absolute top-2 right-2 text-red-600 hover:text-red-800"},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),n(" "+i(r.$page.props.flash.error),1)])):p("",!0),e("div",W,[e("div",G,[A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),onInput:t[1]||(t[1]=(...s)=>l(k)&&l(k)(...s)),type:"text",placeholder:"Search vacancies...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4D9F95] focus:border-transparent"},null,544),[[E,x.value]])])]),e("div",J,[e("div",K,[e("table",R,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Department "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Applications "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created By "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created At "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",X,[(o(!0),g(M,null,C(a.vacancies.data,s=>(o(),g("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Y,[e("div",Z,i(s.title),1),e("div",ee,i(s.description),1)]),e("td",te,[e("span",se,i(s.department_name),1)]),e("td",re,i(s.application_count),1),e("td",ae,i(s.creator?.name||"Unknown"),1),e("td",oe,i(B(s.created_at)),1),e("td",ne,[e("div",ie,[b(l(u),{href:`/hli-admin/vacancies/${s.id}`,class:"text-[#4D9F95] hover:text-[#3d7f75]"},{default:d(()=>[...t[6]||(t[6]=[n(" View ",-1)])]),_:1},8,["href"]),b(l(u),{href:`/hli-admin/vacancies/${s.id}/edit`,class:"text-indigo-600 hover:text-indigo-900"},{default:d(()=>[...t[7]||(t[7]=[n(" Edit ",-1)])]),_:1},8,["href"]),e("button",{onClick:v=>F(s),class:"text-red-600 hover:text-red-900"}," Delete ",8,le)])])]))),128))])])]),a.vacancies.last_page>1?(o(),g("div",de,[e("div",ce,[e("div",ue,[a.vacancies.prev_page_url?(o(),m(l(u),{key:0,href:a.vacancies.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:d(()=>[...t[9]||(t[9]=[n(" Previous ",-1)])]),_:1},8,["href"])):p("",!0),a.vacancies.next_page_url?(o(),m(l(u),{key:1,href:a.vacancies.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:d(()=>[...t[10]||(t[10]=[n(" Next ",-1)])]),_:1},8,["href"])):p("",!0)]),e("div",pe,[e("div",null,[e("p",me,[t[11]||(t[11]=n(" Showing ",-1)),e("span",ge,i(a.vacancies.from),1),t[12]||(t[12]=n(" to ",-1)),e("span",xe,i(a.vacancies.to),1),t[13]||(t[13]=n(" of ",-1)),e("span",fe,i(a.vacancies.total),1),t[14]||(t[14]=n(" results ",-1))])]),e("div",null,[e("nav",he,[a.vacancies.prev_page_url?(o(),m(l(u),{key:0,href:a.vacancies.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:d(()=>[...t[15]||(t[15]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"])):p("",!0),(o(!0),g(M,null,C(j(),s=>(o(),m(l(u),{key:s,href:V(s),class:P([s===a.vacancies.current_page?"z-10 bg-[#4D9F95] border-[#4D9F95] text-white":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},{default:d(()=>[n(i(s),1)]),_:2},1032,["href","class"]))),128)),a.vacancies.next_page_url?(o(),m(l(u),{key:1,href:a.vacancies.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:d(()=>[...t[16]||(t[16]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"])):p("",!0)])])])])])):p("",!0)])]),_:1},8,["user"]))}};export{be as default};
